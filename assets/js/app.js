'use strict';

(function () {
	'use strict';

	svg4everybody();

	// MENU TRIGGER

	var menuTrig = document.querySelector('.menu__trigger');
	menuTrig.addEventListener('click', function () {
		var menuList = document.querySelector('.menu__list');

		if (menuList.classList.contains('opened')) {
			menuList.classList.remove('opened');
		} else {
			menuList.classList.add('opened');
		}
	});

	//  OWL.CAROUSEL

	$(".owl-carousel").owlCarousel({
		loop: true,
		margin: 10,
		nav: true,
		responsive: {
			0: {
				items: 1
			},

			480: {
				items: 3
			},

			1000: {
				items: 3
			}
		}
	});

	// ***** GRABDOWN ***** //

	var trig = document.querySelector('.header__link-down');
	trig.addEventListener('click', function () {
		var winHeight = $(window).innerHeight();
		$('html, body').animate({ scrollTop: winHeight }, 1500);
	});
})();

// LESS SPEED OF SCROLL
var scrollDebounce = function () {

	var debounce = function debounce(func) {
		var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;
		var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;

		var timeout;
		return function () {
			var context = this,
			    args = arguments;
			var later = function later() {
				timeout = null;
				if (!immediate) func.apply(context, args);
			};
			var callNow = immediate && !timeout;
			clearTimeout(timeout);
			timeout = setTimeout(later, wait);
			if (callNow) func.apply(context, args);
		};
	};

	return {
		init: debounce
	};
}();
'use strict';

var headerAnimation = function () {

    var init = function init() {
        _setUpListners();
    };

    var _setUpListners = function _setUpListners() {
        window.addEventListener('load', _initialSet);
        window.addEventListener('scroll', scrollDebounce.init(_animatedLogo));
    };

    var tl = new TimelineMax(),
        section = document.querySelector('.feature'),
        featureSvg = document.querySelectorAll('.feature__svg'),
        featureSvgElements = document.querySelectorAll('.feature__svg-elem');

    function _initialSet() {
        TweenMax.set(featureSvg, { visibility: "hidden", opacity: 0, y: -100, rotation: 0 });
        TweenMax.set(featureSvgElements, { visibility: "hidden", opacity: 0, y: -100 });
    }

    function _animatedLogo() {

        var slideInAt = window.scrollY + window.innerHeight - section.clientHeight / 4;
        // bottom of the section
        var bottomSection = section.offsetTop + section.clientHeight;
        var isHalfShown = slideInAt > section.offsetTop;
        var isNotScrolledPast = window.scrollY < bottomSection;

        if (isHalfShown && isNotScrolledPast) {
            tl.staggerTo(featureSvg, 1, { visibility: "visible", opacity: 1, y: 0, ease: Bounce.easeOut }, 0.3).staggerTo(featureSvgElements, 1, { visibility: "visible", opacity: 1, y: 0, ease: Elastic.easeOut }, 0.3, '-=1.41');
        }
    };

    return {
        init: init
    };
}();
headerAnimation.init();
'use strict';

var headerAnimation = function () {

    var init = function init() {
        _setUpListners();
    };

    var _setUpListners = function _setUpListners() {
        window.addEventListener('load', _onLoad);
    };

    var tl = new TimelineMax(),
        navItems = document.querySelectorAll('.header__nav-link'),
        svgElements = document.querySelectorAll('.header__svg-elem'),
        trig = document.querySelector('.header__link-down'),
        heading = document.querySelector('.heading__text'),
        subHeading = document.querySelector('.subheading__text'),
        logo = document.querySelector('.header__logo');

    function _onLoad() {
        TweenMax.set(logo, { x: "-1000px" });
        TweenMax.set([heading, subHeading], { opacity: 0, y: "-30px" });
        TweenMax.set(navItems, { opacity: 0 });
        TweenMax.set(trig, { opacity: 0, y: "100px" });
        tl.to(logo, 3, { x: 0, ease: Elastic.easeOut }).to(heading, 1, { opacity: 1, y: 0, ease: Linear.easeNone }, "-=1").to(subHeading, 1, { opacity: 1, y: 0, ease: Linear.easeNone, onComplete: _animatedLogo });
    }

    function _animatedLogo() {
        var items = document.querySelectorAll('.header__svg');
        items.forEach(function (item) {
            item.classList.add('action');
        });
        tl.to(navItems, 0.5, { opacity: 1 }).staggerFromTo(svgElements, 2, { opacity: 0, scale: 0 }, { opacity: 1, scale: 1, ease: Elastic.easeOut }, 0.5).to(trig, 0.5, { opacity: 1, x: 0, y: 0, ease: Bounce.easeOut }, "-=1.5");
    };

    return {
        init: init
    };
}();
headerAnimation.init();
'use strict';

var skillsAnimation = function () {

    var init = function init() {
        _setUpListners();
    };

    var _setUpListners = function _setUpListners() {
        window.addEventListener('scroll', scrollDebounce.init(_animatedSkills));
    };

    var section = document.querySelector('.skills');

    function _animatedSkills() {

        var slideInAt = window.scrollY + window.innerHeight - section.clientHeight / 1.5;
        // bottom of the section
        var bottomSection = section.offsetTop + section.clientHeight;
        var isHalfShown = slideInAt > section.offsetTop;
        var isNotScrolledPast = window.scrollY < bottomSection;
        var progressLines = document.querySelectorAll('.skills__progress-line');

        if (isHalfShown && isNotScrolledPast) {
            progressLines.forEach(function (line) {
                var attrData = line.attributes['data-progress'].nodeValue;
                line.style.width = attrData;
            });
        } else {
            progressLines.forEach(function (line) {
                line.style.width = 0;
            });
        }
    };

    return {
        init: init
    };
}();
skillsAnimation.init();
'use strict';

var stickMenu = function () {

    var init = function init() {
        _setUpListners();
    };

    var _setUpListners = function _setUpListners() {
        $(window).on('scroll', _stick);
        $(window).on('resize', _refreshVar);
    };

    var menuPos, winPos, menuHeight;

    function _refreshVar() {
        menuPos = $('.menu').offset().top + 20;
        menuHeight = $('.menu').outerHeight(true);
    }

    $('<div class="clone-menu"></div>').insertBefore($('.menu')).css('height', menuHeight).hide();
    _refreshVar();

    function _stick() {
        winPos = $(window).scrollTop();

        if (winPos >= menuPos) {
            $('.menu').addClass('fixed shadow');
            $('.clone-menu').show();
        } else {
            $('.menu').removeClass('fixed shadow');
            $('.clone-menu').hide();
        }
    };

    return {
        init: init
    };
}();
stickMenu.init();
// // ***** tittle ***** //
//     const tl = new TimelineMax(),
//         tittle = document.querySelectorAll('.tittle'),
//         str = tittle[0].innerText;
//         console.log(str);

//     for (let i = 0; i < str.length; i++) {
//         var e = document.createElement("span");
//             e.innerHTML = str[i];
//             console.log(e);
//             tittle[0].appendChild(e);
//     };

//     const arrayOfLetters = document.querySelectorAll('.tittle > span');
//     arrayOfLetters.forEach(letter => {
//         TweenMax.set(letter, {opacity: 0, scale: 0});
//     });

//     tl.staggerTo(arrayOfLetters, 0.5, {opacity: 1, scale: 1, ease:Elastic.easeOut}, 0.2);
"use strict";
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImZlYXR1cmVBbmltYXRpb24uanMiLCJoZWFkZXJBbmltYXRpb24uanMiLCJza2lsbHMuanMiLCJzdGlja01lbnUuanMiLCJ0aXR0bGUuanMiXSwibmFtZXMiOlsic3ZnNGV2ZXJ5Ym9keSIsIm1lbnVUcmlnIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1lbnVMaXN0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJhZGQiLCIkIiwib3dsQ2Fyb3VzZWwiLCJsb29wIiwibWFyZ2luIiwibmF2IiwicmVzcG9uc2l2ZSIsIml0ZW1zIiwidHJpZyIsIndpbkhlaWdodCIsIndpbmRvdyIsImlubmVySGVpZ2h0IiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInNjcm9sbERlYm91bmNlIiwiZGVib3VuY2UiLCJmdW5jIiwid2FpdCIsImltbWVkaWF0ZSIsInRpbWVvdXQiLCJjb250ZXh0IiwiYXJncyIsImFyZ3VtZW50cyIsImxhdGVyIiwiYXBwbHkiLCJjYWxsTm93IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImluaXQiLCJoZWFkZXJBbmltYXRpb24iLCJfc2V0VXBMaXN0bmVycyIsIl9pbml0aWFsU2V0IiwiX2FuaW1hdGVkTG9nbyIsInRsIiwiVGltZWxpbmVNYXgiLCJzZWN0aW9uIiwiZmVhdHVyZVN2ZyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmZWF0dXJlU3ZnRWxlbWVudHMiLCJUd2Vlbk1heCIsInNldCIsInZpc2liaWxpdHkiLCJvcGFjaXR5IiwieSIsInJvdGF0aW9uIiwic2xpZGVJbkF0Iiwic2Nyb2xsWSIsImNsaWVudEhlaWdodCIsImJvdHRvbVNlY3Rpb24iLCJvZmZzZXRUb3AiLCJpc0hhbGZTaG93biIsImlzTm90U2Nyb2xsZWRQYXN0Iiwic3RhZ2dlclRvIiwiZWFzZSIsIkJvdW5jZSIsImVhc2VPdXQiLCJFbGFzdGljIiwiX29uTG9hZCIsIm5hdkl0ZW1zIiwic3ZnRWxlbWVudHMiLCJoZWFkaW5nIiwic3ViSGVhZGluZyIsImxvZ28iLCJ4IiwidG8iLCJMaW5lYXIiLCJlYXNlTm9uZSIsIm9uQ29tcGxldGUiLCJmb3JFYWNoIiwiaXRlbSIsInN0YWdnZXJGcm9tVG8iLCJzY2FsZSIsInNraWxsc0FuaW1hdGlvbiIsIl9hbmltYXRlZFNraWxscyIsInByb2dyZXNzTGluZXMiLCJhdHRyRGF0YSIsImxpbmUiLCJhdHRyaWJ1dGVzIiwibm9kZVZhbHVlIiwic3R5bGUiLCJ3aWR0aCIsInN0aWNrTWVudSIsIm9uIiwiX3N0aWNrIiwiX3JlZnJlc2hWYXIiLCJtZW51UG9zIiwid2luUG9zIiwibWVudUhlaWdodCIsIm9mZnNldCIsInRvcCIsIm91dGVySGVpZ2h0IiwiaW5zZXJ0QmVmb3JlIiwiY3NzIiwiaGlkZSIsImFkZENsYXNzIiwic2hvdyIsInJlbW92ZUNsYXNzIl0sIm1hcHBpbmdzIjoiOztBQUFBLENBQUMsWUFBVztBQUNWOztBQUVEQTs7QUFFQTs7QUFFQSxLQUFNQyxXQUFXQyxTQUFTQyxhQUFULENBQXVCLGdCQUF2QixDQUFqQjtBQUNBRixVQUFTRyxnQkFBVCxDQUEwQixPQUExQixFQUFtQyxZQUFXO0FBQzdDLE1BQUlDLFdBQVdILFNBQVNDLGFBQVQsQ0FBdUIsYUFBdkIsQ0FBZjs7QUFFQSxNQUFHRSxTQUFTQyxTQUFULENBQW1CQyxRQUFuQixDQUE0QixRQUE1QixDQUFILEVBQTBDO0FBQ3pDRixZQUFTQyxTQUFULENBQW1CRSxNQUFuQixDQUEwQixRQUExQjtBQUNBLEdBRkQsTUFFTztBQUNOSCxZQUFTQyxTQUFULENBQW1CRyxHQUFuQixDQUF1QixRQUF2QjtBQUNBO0FBQ0QsRUFSRDs7QUFVQTs7QUFFQUMsR0FBRSxlQUFGLEVBQW1CQyxXQUFuQixDQUErQjtBQUM5QkMsUUFBTSxJQUR3QjtBQUU5QkMsVUFBTyxFQUZ1QjtBQUc5QkMsT0FBSyxJQUh5QjtBQUk5QkMsY0FBVztBQUNWLE1BQUU7QUFDREMsV0FBTTtBQURMLElBRFE7O0FBS1YsUUFB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LFNBQVYsRUFBVDs7QUFFQSxZQUFJeUUsVUFBVUQsT0FBZCxFQUF1QjtBQUNuQnBGLGNBQUUsT0FBRixFQUFXNkYsUUFBWCxDQUFvQixjQUFwQjtBQUNBN0YsY0FBRSxhQUFGLEVBQWlCOEYsSUFBakI7QUFDSCxTQUhELE1BSUs7QUFDRDlGLGNBQUUsT0FBRixFQUFXK0YsV0FBWCxDQUF1QixjQUF2QjtBQUNBL0YsY0FBRSxhQUFGLEVBQWlCNEYsSUFBakI7QUFDSDtBQUNKOztBQUdELFdBQU87QUFDSGpFLGNBQU1BO0FBREgsS0FBUDtBQUlILENBeENpQixFQUFsQjtBQXlDQXFELFVBQVVyRCxJQUFWO0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcclxuICAndXNlIHN0cmljdCc7XHJcblxyXG5cdHN2ZzRldmVyeWJvZHkoKTtcclxuXHJcblx0Ly8gTUVOVSBUUklHR0VSXHJcblxyXG5cdGNvbnN0IG1lbnVUcmlnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX3RyaWdnZXInKTtcclxuXHRtZW51VHJpZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0bGV0IG1lbnVMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfX2xpc3QnKTtcclxuXHRcdFxyXG5cdFx0aWYobWVudUxpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuZWQnKSkge1xyXG5cdFx0XHRtZW51TGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdG1lbnVMaXN0LmNsYXNzTGlzdC5hZGQoJ29wZW5lZCcpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyAgT1dMLkNBUk9VU0VMXHJcblxyXG5cdCQoXCIub3dsLWNhcm91c2VsXCIpLm93bENhcm91c2VsKHtcclxuXHRcdGxvb3A6IHRydWUsXHJcblx0XHRtYXJnaW46MTAsXHJcblx0XHRuYXY6IHRydWUsXHJcblx0XHRyZXNwb25zaXZlOntcclxuXHRcdFx0MDp7XHJcblx0XHRcdFx0aXRlbXM6MVxyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0NDgwOntcclxuXHRcdFx0XHRpdGVtczozXHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQxMDAwOntcclxuXHRcdFx0XHRpdGVtczozXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0IC8vICoqKioqIEdSQUJET1dOICoqKioqIC8vXHJcblxyXG5cdGNvbnN0IHRyaWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19saW5rLWRvd24nKTtcclxuXHR0cmlnLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0XHRjb25zdCB3aW5IZWlnaHQgPSAkKHdpbmRvdykuaW5uZXJIZWlnaHQoKTtcclxuXHRcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtzY3JvbGxUb3A6IHdpbkhlaWdodH0sIDE1MDApO1xyXG5cdH0pO1xyXG5cdFxyXG59KSgpO1xyXG5cclxuLy8gTEVTUyBTUEVFRCBPRiBTQ1JPTExcclxuY29uc3Qgc2Nyb2xsRGVib3VuY2UgPSAoZnVuY3Rpb24oKSB7XHJcblx0XHJcbiAgICBjb25zdCBkZWJvdW5jZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQgPSAyMCwgaW1tZWRpYXRlID0gdHJ1ZSkge1xyXG4gICAgICAgIHZhciB0aW1lb3V0O1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICBpZiAoICFpbW1lZGlhdGUgKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XHJcbiAgICAgICAgICAgIGlmICggY2FsbE5vdyApIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblx0XHJcblx0cmV0dXJuIHtcclxuICAgICAgICBpbml0OiBkZWJvdW5jZVxyXG5cdH1cclxuXHJcbn0pKCk7XHJcbiIsImNvbnN0IGhlYWRlckFuaW1hdGlvbiA9IChmdW5jdGlvbigpIHtcclxuXHJcblx0Y29uc3QgaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIF9zZXRVcExpc3RuZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IF9zZXRVcExpc3RuZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBfaW5pdGlhbFNldCk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHNjcm9sbERlYm91bmNlLmluaXQoX2FuaW1hdGVkTG9nbykpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB0bCA9IG5ldyBUaW1lbGluZU1heCgpLFxyXG4gICAgICAgICAgc2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWF0dXJlJyksXHJcbiAgICAgICAgICBmZWF0dXJlU3ZnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZlYXR1cmVfX3N2ZycpLFxyXG4gICAgICAgICAgZmVhdHVyZVN2Z0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZlYXR1cmVfX3N2Zy1lbGVtJyk7XHJcbiAgICAgICAgICBcclxuXHJcbiAgICBmdW5jdGlvbiBfaW5pdGlhbFNldCgpIHtcclxuICAgICAgICBUd2Vlbk1heC5zZXQoZmVhdHVyZVN2Zywge3Zpc2liaWxpdHk6IFwiaGlkZGVuXCIsIG9wYWNpdHk6IDAsIHk6IC0xMDAsIHJvdGF0aW9uOiAwfSk7XHJcbiAgICAgICAgVHdlZW5NYXguc2V0KGZlYXR1cmVTdmdFbGVtZW50cywge3Zpc2liaWxpdHk6IFwiaGlkZGVuXCIsIG9wYWNpdHk6IDAsIHk6IC0xMDB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfYW5pbWF0ZWRMb2dvICgpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgc2xpZGVJbkF0ID0gKHdpbmRvdy5zY3JvbGxZICsgd2luZG93LmlubmVySGVpZ2h0KSAtIHNlY3Rpb24uY2xpZW50SGVpZ2h0IC8gNDtcclxuICAgICAgICAvLyBib3R0b20gb2YgdGhlIHNlY3Rpb25cclxuICAgICAgICBjb25zdCBib3R0b21TZWN0aW9uID0gc2VjdGlvbi5vZmZzZXRUb3AgKyBzZWN0aW9uLmNsaWVudEhlaWdodDtcclxuICAgICAgICBjb25zdCBpc0hhbGZTaG93biA9IHNsaWRlSW5BdCA+IHNlY3Rpb24ub2Zmc2V0VG9wO1xyXG4gICAgICAgIGNvbnN0IGlzTm90U2Nyb2xsZWRQYXN0ID0gd2luZG93LnNjcm9sbFkgPCBib3R0b21TZWN0aW9uO1xyXG5cclxuICAgICAgICBpZiAoaXNIYWxmU2hvd24gJiYgaXNOb3RTY3JvbGxlZFBhc3QpIHtcclxuICAgICAgICAgICAgdGwuc3RhZ2dlclRvKGZlYXR1cmVTdmcsIDEsIHt2aXNpYmlsaXR5OiBcInZpc2libGVcIiwgb3BhY2l0eTogMSwgeTogMCwgZWFzZTpCb3VuY2UuZWFzZU91dH0sIDAuMylcclxuICAgICAgICAgICAgICAgIC5zdGFnZ2VyVG8oZmVhdHVyZVN2Z0VsZW1lbnRzLCAxLCB7dmlzaWJpbGl0eTogXCJ2aXNpYmxlXCIsIG9wYWNpdHk6IDEsIHk6IDAsIGVhc2U6RWxhc3RpYy5lYXNlT3V0fSwgMC4zLCAnLT0xLjQxJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblx0XHJcblx0cmV0dXJuIHtcclxuXHRcdGluaXQ6IGluaXRcclxuXHR9XHJcblxyXG59KSgpO1xyXG5oZWFkZXJBbmltYXRpb24uaW5pdCgpOyIsImNvbnN0IGhlYWRlckFuaW1hdGlvbiA9IChmdW5jdGlvbigpIHtcclxuXHJcblx0Y29uc3QgaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIF9zZXRVcExpc3RuZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IF9zZXRVcExpc3RuZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBfb25Mb2FkKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdGwgPSBuZXcgVGltZWxpbmVNYXgoKSxcclxuICAgICAgICAgIG5hdkl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl9fbmF2LWxpbmsnKSxcclxuICAgICAgICAgIHN2Z0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl9fc3ZnLWVsZW0nKSxcclxuICAgICAgICAgIHRyaWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19saW5rLWRvd24nKSxcclxuICAgICAgICAgIGhlYWRpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGluZ19fdGV4dCcpLFxyXG4gICAgICAgICAgc3ViSGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJoZWFkaW5nX190ZXh0JyksXHJcbiAgICAgICAgICBsb2dvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbG9nbycpO1xyXG5cclxuICAgIGZ1bmN0aW9uIF9vbkxvYWQoKSB7XHJcbiAgICAgICAgVHdlZW5NYXguc2V0KGxvZ28sIHt4OlwiLTEwMDBweFwifSk7XHJcbiAgICAgICAgVHdlZW5NYXguc2V0KFtoZWFkaW5nLCBzdWJIZWFkaW5nXSwge29wYWNpdHk6IDAsIHk6XCItMzBweFwifSk7XHJcbiAgICAgICAgVHdlZW5NYXguc2V0KG5hdkl0ZW1zLCB7b3BhY2l0eTogMH0pO1xyXG4gICAgICAgIFR3ZWVuTWF4LnNldCh0cmlnLCB7b3BhY2l0eTogMCwgeTogXCIxMDBweFwifSk7XHJcbiAgICAgICAgdGwudG8obG9nbywgMywge3g6IDAsIGVhc2U6RWxhc3RpYy5lYXNlT3V0fSlcclxuICAgICAgICAgICAgLnRvKGhlYWRpbmcsIDEsIHtvcGFjaXR5OiAxLCB5OiAwLCBlYXNlOkxpbmVhci5lYXNlTm9uZX0sIFwiLT0xXCIpXHJcbiAgICAgICAgICAgIC50byhzdWJIZWFkaW5nLCAxLCB7b3BhY2l0eTogMSwgeTogMCwgZWFzZTpMaW5lYXIuZWFzZU5vbmUsIG9uQ29tcGxldGU6IF9hbmltYXRlZExvZ299KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfYW5pbWF0ZWRMb2dvICgpIHtcclxuICAgICAgICBjb25zdCBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfX3N2ZycpO1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnYWN0aW9uJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGwudG8obmF2SXRlbXMsIDAuNSwge29wYWNpdHk6IDF9KVxyXG4gICAgICAgIC5zdGFnZ2VyRnJvbVRvKHN2Z0VsZW1lbnRzLCAyLCB7b3BhY2l0eTogMCwgc2NhbGU6IDB9LCB7b3BhY2l0eTogMSwgc2NhbGU6IDEsIGVhc2U6RWxhc3RpYy5lYXNlT3V0fSwgMC41KVxyXG4gICAgICAgIC50byh0cmlnLCAwLjUsIHtvcGFjaXR5OiAxLCB4OiAwLCB5OiAwLCBlYXNlOkJvdW5jZS5lYXNlT3V0fSwgXCItPTEuNVwiKTtcclxuICAgIH07XHJcblx0XHJcblx0cmV0dXJuIHtcclxuXHRcdGluaXQ6IGluaXRcclxuXHR9XHJcblxyXG59KSgpO1xyXG5oZWFkZXJBbmltYXRpb24uaW5pdCgpO1xyXG4iLCJjb25zdCBza2lsbHNBbmltYXRpb24gPSAoZnVuY3Rpb24oKSB7XHJcblxyXG5cdGNvbnN0IGluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfc2V0VXBMaXN0bmVycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBfc2V0VXBMaXN0bmVycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxEZWJvdW5jZS5pbml0KF9hbmltYXRlZFNraWxscykpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBzZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNraWxscycpO1xyXG5cclxuICAgIGZ1bmN0aW9uIF9hbmltYXRlZFNraWxscyAoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHNsaWRlSW5BdCA9ICh3aW5kb3cuc2Nyb2xsWSArIHdpbmRvdy5pbm5lckhlaWdodCkgLSBzZWN0aW9uLmNsaWVudEhlaWdodCAvIDEuNTtcclxuICAgICAgICAvLyBib3R0b20gb2YgdGhlIHNlY3Rpb25cclxuICAgICAgICBjb25zdCBib3R0b21TZWN0aW9uID0gc2VjdGlvbi5vZmZzZXRUb3AgKyBzZWN0aW9uLmNsaWVudEhlaWdodDtcclxuICAgICAgICBjb25zdCBpc0hhbGZTaG93biA9IHNsaWRlSW5BdCA+IHNlY3Rpb24ub2Zmc2V0VG9wO1xyXG4gICAgICAgIGNvbnN0IGlzTm90U2Nyb2xsZWRQYXN0ID0gd2luZG93LnNjcm9sbFkgPCBib3R0b21TZWN0aW9uO1xyXG4gICAgICAgIGNvbnN0IHByb2dyZXNzTGluZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2tpbGxzX19wcm9ncmVzcy1saW5lJyk7XHJcblxyXG4gICAgICAgIGlmIChpc0hhbGZTaG93biAmJiBpc05vdFNjcm9sbGVkUGFzdCkge1xyXG4gICAgICAgICAgICBwcm9ncmVzc0xpbmVzLmZvckVhY2gobGluZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXR0ckRhdGEgPSBsaW5lLmF0dHJpYnV0ZXNbJ2RhdGEtcHJvZ3Jlc3MnXS5ub2RlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsaW5lLnN0eWxlLndpZHRoID0gYXR0ckRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzTGluZXMuZm9yRWFjaChsaW5lID0+IHtcclxuICAgICAgICAgICAgICAgIGxpbmUuc3R5bGUud2lkdGggPSAwO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHRcclxuXHRyZXR1cm4ge1xyXG5cdFx0aW5pdDogaW5pdFxyXG5cdH1cclxuXHJcbn0pKCk7XHJcbnNraWxsc0FuaW1hdGlvbi5pbml0KCk7IiwiY29uc3Qgc3RpY2tNZW51ID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIGNvbnN0IGluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBfc2V0VXBMaXN0bmVycygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBfc2V0VXBMaXN0bmVycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQod2luZG93KS5vbignc2Nyb2xsJywgX3N0aWNrKTtcclxuICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIF9yZWZyZXNoVmFyKTtcclxuICAgICAgICBcclxuICAgIH07XHJcblxyXG4gICAgdmFyIG1lbnVQb3MsIHdpblBvcywgbWVudUhlaWdodDtcclxuICAgICAgICBcclxuICAgIGZ1bmN0aW9uIF9yZWZyZXNoVmFyKCkge1xyXG4gICAgICAgIG1lbnVQb3MgPSAkKCcubWVudScpLm9mZnNldCgpLnRvcCArIDIwO1xyXG4gICAgICAgIG1lbnVIZWlnaHQgPSAkKCcubWVudScpLm91dGVySGVpZ2h0KHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgICQoJzxkaXYgY2xhc3M9XCJjbG9uZS1tZW51XCI+PC9kaXY+JykuaW5zZXJ0QmVmb3JlKCQoJy5tZW51JykpLmNzcygnaGVpZ2h0JywgbWVudUhlaWdodCkuaGlkZSgpO1xyXG4gICAgX3JlZnJlc2hWYXIoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBfc3RpY2soKSB7XHJcbiAgICAgICAgd2luUG9zID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh3aW5Qb3MgPj0gbWVudVBvcykge1xyXG4gICAgICAgICAgICAkKCcubWVudScpLmFkZENsYXNzKCdmaXhlZCBzaGFkb3cnKTsgIFxyXG4gICAgICAgICAgICAkKCcuY2xvbmUtbWVudScpLnNob3coKTtcclxuICAgICAgICB9ICBcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgJCgnLm1lbnUnKS5yZW1vdmVDbGFzcygnZml4ZWQgc2hhZG93Jyk7XHJcbiAgICAgICAgICAgICQoJy5jbG9uZS1tZW51JykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGluaXQ6IGluaXRcclxuICAgIH1cclxuXHJcbn0pKCk7XHJcbnN0aWNrTWVudS5pbml0KCk7IiwiLy8gLy8gKioqKiogdGl0dGxlICoqKioqIC8vXHJcbi8vICAgICBjb25zdCB0bCA9IG5ldyBUaW1lbGluZU1heCgpLFxyXG4vLyAgICAgICAgIHRpdHRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aXR0bGUnKSxcclxuLy8gICAgICAgICBzdHIgPSB0aXR0bGVbMF0uaW5uZXJUZXh0O1xyXG4vLyAgICAgICAgIGNvbnNvbGUubG9nKHN0cik7XHJcbiBcclxuLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbi8vICAgICAgICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuLy8gICAgICAgICAgICAgZS5pbm5lckhUTUwgPSBzdHJbaV07XHJcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4vLyAgICAgICAgICAgICB0aXR0bGVbMF0uYXBwZW5kQ2hpbGQoZSk7XHJcbi8vICAgICB9O1xyXG5cclxuLy8gICAgIGNvbnN0IGFycmF5T2ZMZXR0ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRpdHRsZSA+IHNwYW4nKTtcclxuLy8gICAgIGFycmF5T2ZMZXR0ZXJzLmZvckVhY2gobGV0dGVyID0+IHtcclxuLy8gICAgICAgICBUd2Vlbk1heC5zZXQobGV0dGVyLCB7b3BhY2l0eTogMCwgc2NhbGU6IDB9KTtcclxuLy8gICAgIH0pO1xyXG4gICAgXHJcbi8vICAgICB0bC5zdGFnZ2VyVG8oYXJyYXlPZkxldHRlcnMsIDAuNSwge29wYWNpdHk6IDEsIHNjYWxlOiAxLCBlYXNlOkVsYXN0aWMuZWFzZU91dH0sIDAuMik7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
